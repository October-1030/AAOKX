# 🧪 Hyperliquid 测试网完整测试流程

**预计总时间：15-20 分钟**

---

## 📋 准备工作

### 需要的工具

- ✅ Chrome/Edge/Brave 浏览器（安装了 MetaMask）
- ✅ MetaMask 钱包插件
- ✅ 一点 ETH 用于支付 Gas 费（测试网可以免费获取）

---

## 🚀 第一步：访问测试网并连接钱包

### 1.1 访问测试网

打开浏览器，访问：
```
https://app.hyperliquid-testnet.xyz/
```

### 1.2 连接 MetaMask

1. 点击右上角的 **"Connect Wallet"** 按钮
2. 选择 **MetaMask**
3. MetaMask 会弹出窗口，提示切换到 **Arbitrum Sepolia** 测试网
4. 点击 **"切换网络"**（Switch Network）
5. 批准连接请求

### 1.3 验证连接成功

页面应该显示：
- ✅ 右上角显示你的钱包地址（缩写形式，如 `0x99c1...27aF`）
- ✅ 账户余额显示为 `$0.00`（还没充值）

---

## 💰 第二步：获取测试网资金

### 2.1 加入 Hyperliquid Discord

访问：
```
https://discord.gg/hyperliquid
```

1. 点击 "Accept Invite"
2. 完成 Discord 验证（如果需要）

### 2.2 申请测试网 USDC

1. 在 Discord 左侧频道列表找到 **#testnet-faucet** 频道
2. 发送命令（替换为你自己的钱包地址）：
   ```
   /faucet 0x99c11e5AF3d953E299Abf5Ae55c40579327027aF
   ```
3. 等待 1-2 分钟，机器人会回复确认

### 2.3 验证资金到账

回到测试网页面：
```
https://app.hyperliquid-testnet.xyz/
```

刷新页面，应该看到：
- ✅ Account Value: **$10,000** 或类似金额
- ✅ 可用余额显示在右上角

**注意：** 如果没收到，可以：
- 在 Discord 再发送一次 `/faucet` 命令
- 或者在 #testnet-help 频道求助

---

## 🔑 第三步：生成测试网 API 密钥

### 3.1 访问 API 管理页面

在测试网页面，点击：
```
Settings（设置） → API
```

或直接访问：
```
https://app.hyperliquid-testnet.xyz/API
```

### 3.2 创建 API 密钥

1. 点击 **"Create API Key"** 按钮
2. MetaMask 会弹出签名请求，点击 **"签名"**（Sign）
3. 设置权限：
   - ✅ **勾选** "Trading" （交易权限）
   - ❌ **不要勾选** "Withdraw"（提款权限）
4. 点击 **"Create"**

### 3.3 保存 API 密钥 ⚠️ 非常重要！

页面会显示：

```
API Wallet Address: 0xABCD1234...  （API 钱包地址）
API Secret Key: 0x1234567890abcdef...  （私钥，只显示一次！）
```

**立即复制并保存到安全的地方！**

**重要提醒：**
- ⚠️ 私钥只会显示一次，关闭页面后无法再看到
- ⚠️ 建议保存到密码管理器（1Password、Bitwarden 等）
- ⚠️ 或者临时保存到记事本（测试完成后删除）

### 3.4 记录你的密钥信息

准备一个文本文件，记录以下信息：

```
主钱包地址: 0x99c11e5AF3d953E299Abf5Ae55c40579327027aF
API钱包地址: 0x...（刚才复制的）
API私钥: 0x...（刚才复制的）
```

---

## ⚙️ 第四步：配置项目环境变量

### 4.1 打开 `.env.local` 文件

在项目根目录找到 `.env.local` 文件，用编辑器打开。

### 4.2 更新配置

**完整替换** Hyperliquid 部分的配置：

```env
# ==================================================
# Hyperliquid 测试网配置
# ==================================================

# 主钱包地址（你的 MetaMask 地址）
HYPERLIQUID_MAIN_WALLET=0x99c11e5AF3d953E299Abf5Ae55c40579327027aF

# API 钱包地址（刚才生成的）
HYPERLIQUID_API_WALLET=粘贴你的API钱包地址

# API Secret Key（刚才生成的私钥）
HYPERLIQUID_API_SECRET=粘贴你的API私钥

# 使用测试网（必须是 true！）
HYPERLIQUID_TESTNET=true
```

### 4.3 保存文件

按 `Ctrl + S` 保存文件。

### 4.4 验证配置

确保：
- ✅ 所有地址和密钥都正确粘贴（没有多余的空格）
- ✅ `HYPERLIQUID_TESTNET=true` （这个非常重要！）
- ✅ 没有删除其他配置（DeepSeek API Key 等）

---

## 🎯 第五步：启用测试网真实交易

### 5.1 编辑配置文件

打开 `lib/config.ts` 文件，找到：

```typescript
USE_REAL_TRADING: false, // ❌ 暂时关闭真实交易（安全模式）
```

修改为：

```typescript
USE_REAL_TRADING: true, // ✅ 测试网真实交易模式
```

### 5.2 保存文件

按 `Ctrl + S` 保存。

---

## 🚀 第六步：启动项目

### 6.1 清除旧的编译缓存

在命令行中运行：

```bash
cd D:\projects\alpha-arena-clone
rmdir /s /q .next
```

如果提示"目录不存在"，忽略即可。

### 6.2 启动开发服务器

```bash
npm run dev
```

### 6.3 观察启动日志（非常重要！）

仔细查看命令行输出，应该看到：

```bash
Alpha Arena Configuration:
- Market Data: 🌐 Real (CoinGecko)
- AI Models: 🤖 Real (DeepSeek)
- Trading Mode: ⚠️ LIVE TRADING (Hyperliquid)  ✅ 这个
- Trading Interval: 180s

[Hyperliquid] 🚀 初始化客户端...
[Hyperliquid] ✅ 客户端初始化成功
[Hyperliquid] 📍 模式: Testnet  ✅ 必须是 Testnet！
[Hyperliquid] 👛 API 钱包: 0x...
[Hyperliquid] 💰 账户余额: $10000.00  ✅ 有余额

✓ Ready in 2.5s
○ Local:   http://localhost:3000
```

**关键检查点：**
- ✅ `Trading Mode: ⚠️ LIVE TRADING`（真实交易模式）
- ✅ `模式: Testnet`（测试网，不是主网！）
- ✅ `账户余额: $10000.00`（有资金）

**如果看到错误：**

❌ **错误 1：未配置 API 密钥**
```
[Hyperliquid] ⚠️ 未配置 API 密钥，将使用只读模式
```
→ 检查 `.env.local` 是否正确配置

❌ **错误 2：无法连接**
```
[Hyperliquid] ❌ 初始化失败
```
→ 检查网络连接，或 API 密钥是否正确

❌ **错误 3：显示主网**
```
[Hyperliquid] 📍 模式: Mainnet
```
→ **立即停止！** 检查 `HYPERLIQUID_TESTNET=true`

---

## 🎮 第七步：执行第一笔测试交易

### 7.1 打开浏览器

访问：
```
http://localhost:3000
```

### 7.2 检查页面状态

页面应该显示：
- ✅ 右上角绿点 "CONNECTED"
- ✅ 6 个 AI 模型，每个 $10,000
- ✅ 6 种加密货币的市场数据

### 7.3 打开浏览器控制台（用于监控）

按 `F12` 打开开发者工具，选择 **Console** 标签。

### 7.4 执行测试交易

点击 **"Execute Cycle"** 按钮。

### 7.5 观察命令行日志（实时监控）

在运行 `npm run dev` 的命令行窗口，你应该看到：

```bash
[RealTrading] 🚀 初始化真实交易执行器
[RealTrading] 模式: 真实交易  ✅

[RealTrading] 💰 DeepSeek V3.1 - 执行真实交易决策
[RealTrading] 动作: BUY
[RealTrading] 📝 开仓 LONG: { coin: 'BTC', size: 30, leverage: 15 }

[Hyperliquid] 📝 下单: {
  symbol: 'BTC-PERP',
  side: 'LONG',
  size: 30,
  leverage: 15
}

[Hyperliquid] ✅ 订单已提交: { status: 'filled', ... }

[RealTrading] ✅ LONG BTC $30.00 @ 15x
```

**关键信息：**
- ✅ `动作: BUY`（AI 决定买入）
- ✅ `开仓 LONG`（做多）
- ✅ `订单已提交`（订单成功）
- ✅ `status: filled`（订单已成交）

**如果看到：**
```bash
[RealTrading] 动作: HOLD
[RealTrading] ℹ️ 保持当前仓位
```
→ 这次 AI 决定不交易，再点击一次 "Execute Cycle"

---

## ✅ 第八步：验证交易结果

### 8.1 检查项目页面

在浏览器中（http://localhost:3000），应该看到：

1. **排行榜变化**
   - 某个 AI 模型的账户金额变化了
   - 显示 Return %（如 +0.5% 或 -0.3%）

2. **持仓信息**（如果有开仓）
   - 在排行榜下方显示绿色或红色的持仓卡片
   - 例如：
     ```
     BTC 15x LONG
     Entry: $67,234.50
     Stop Loss: $65,500
     Take Profit: $70,000
     ```

### 8.2 在测试网界面验证 ⭐ 最重要！

访问测试网交易页面：
```
https://app.hyperliquid-testnet.xyz/
```

**检查订单历史：**
1. 点击页面底部的 **"Orders"** 或 **"Trade History"** 标签
2. 应该看到刚才的订单：
   ```
   Time: 刚才的时间
   Asset: BTC-PERP
   Side: LONG (绿色) 或 SHORT (红色)
   Size: $30
   Fill Price: $67,234.50
   Status: Filled ✅
   ```

**检查持仓：**
1. 点击 **"Positions"** 标签
2. 如果 AI 开了仓，应该看到：
   ```
   Asset: BTC-PERP
   Side: LONG
   Size: ...
   Entry Price: $67,234.50
   Unrealized PnL: +$1.23 或 -$0.45
   ```

### 8.3 对比验证

确认两边的数据一致：
- ✅ 项目页面显示的持仓 = 测试网显示的持仓
- ✅ 入场价格相同
- ✅ 方向相同（LONG 或 SHORT）

---

## 🔄 第九步：多次测试（建议）

### 9.1 再执行 2-3 次交易

点击 **"Execute Cycle"** 按钮 2-3 次，观察：

1. **不同的 AI 表现**
   - DeepSeek：50% 概率交易
   - GPT-5：40% 概率交易
   - Gemini：80% 概率交易（最激进）
   - Claude：几乎不交易
   - Qwen：35% 概率交易
   - Grok：很少交易

2. **排行榜变化**
   - 有的模型赚钱（绿色 +%）
   - 有的模型亏钱（红色 -%）
   - 排名会重新排序

3. **止损/止盈触发**
   - 如果价格波动，可能触发自动平仓
   - 命令行会显示：`Stop loss triggered` 或 `Take profit hit`

### 9.2 启动自动交易（可选）

点击 **"Start Trading"** 按钮：
- 按钮会变成红色 "Stop Trading"
- 每 3 分钟自动执行一次交易
- 可以离开电脑，定期回来查看

**停止自动交易：**
- 点击红色的 **"Stop Trading"** 按钮

---

## 📊 第十步：查看详细数据

### 10.1 权益曲线图

滚动到页面下方，可以看到：
- 📈 彩色的线条图
- 每种颜色代表一个 AI 模型
- 显示账户价值随时间的变化

### 10.2 Model Chat（AI 思考过程）

在权益图下方：
1. 选择一个 AI 模型（如 DeepSeek）
2. 查看它的决策思路：
   ```
   ## Overall Assessment

   市场显示积极信号，BTC 技术指标良好...

   ## New Opportunity Scan

   BTC 分析：
   - 强劲的多头动能
   - 入场条件满足...
   ```

---

## 🎉 成功标志

如果你完成以上所有步骤，并且：

✅ **在命令行看到：**
```
[Hyperliquid] 📍 模式: Testnet
[Hyperliquid] ✅ 订单已提交
```

✅ **在测试网页面看到：**
- 订单历史中有新订单
- 持仓列表显示正确

✅ **在项目页面看到：**
- AI 模型的余额在变化
- 持仓信息正确显示

**恭喜！🎊 你已经成功在测试网进行真实交易测试！**

---

## 🧹 测试完成后的清理（可选）

### 如果想关闭测试网交易

1. **平掉所有持仓**（在测试网页面）
   ```
   https://app.hyperliquid-testnet.xyz/
   点击 "Close All Positions"
   ```

2. **停止项目**
   ```
   在命令行按 Ctrl+C
   ```

3. **关闭真实交易**（如果不想继续测试）
   ```typescript
   // lib/config.ts
   USE_REAL_TRADING: false,
   ```

---

## ❓ 常见问题

### Q1: 点击 Execute Cycle 后没反应？

**A:** 可能是：
1. **AI 选择 HOLD**（不交易）
   - 解决：再点击 1-2 次，Gemini 有 80% 概率会交易
2. **网络延迟**
   - 解决：等待 10-15 秒，观察命令行日志
3. **API 连接问题**
   - 解决：检查命令行是否有错误信息

### Q2: 测试网页面看不到订单？

**A:** 检查：
1. 确认 `HYPERLIQUID_TESTNET=true`
2. 刷新测试网页面
3. 检查钱包地址是否正确
4. 查看命令行日志确认订单是否真的提交了

### Q3: 提示"Insufficient funds"？

**A:** 原因：
- 测试网资金不足
- 解决：再去 Discord #testnet-faucet 申请资金

### Q4: 订单失败，显示 "Order rejected"？

**A:** 可能原因：
1. 市场波动太大，价格变化
2. 订单量太小（低于最小单位）
3. 杠杆设置过高

**解决：** 订单会自动重试，或者手动再执行一次

### Q5: 如何切换回模拟模式？

**A:** 两步：
```typescript
// lib/config.ts
USE_REAL_TRADING: false,
```
然后重启项目。

---

## 🎯 下一步：主网配置（可选）

如果测试网测试成功，并且你想用真实资金交易，请参考：
- **`真实交易安全配置指南.md`** - 主网配置详细步骤

**重要提醒：**
- ⚠️ 主网使用真实资金
- ⚠️ 建议先用小额（$50-$100）测试
- ⚠️ 设置低杠杆（≤5x）
- ⚠️ 全程监控第一笔交易

---

## 📞 获取帮助

遇到问题？

1. **检查命令行日志** - 通常会显示详细错误信息
2. **查看浏览器控制台（F12）** - 可能有前端错误
3. **访问 Hyperliquid Discord** - https://discord.gg/hyperliquid
4. **参考官方文档** - https://hyperliquid.gitbook.io/

---

**祝测试顺利！🚀 Have fun on testnet!**
